create table users
(
    id                 bigint auto_increment comment '用户ID，主键自增'
        primary key,
    username           varchar(50)                        not null comment '用户名，唯一标识',
    email              varchar(100)                       not null comment '邮箱地址',
    password_hash      varchar(255)                       not null comment '密码哈希值',
    role               tinyint  default 0                 not null comment '用户角色: 0=体验用户, 1=正式用户, 2=管理员',
    questionnaire_data json                               null comment '身份认证问卷数据(JSON格式)',
    wechat_openid      varchar(64)                        null comment '微信用户唯一标识(openid)',
    wechat_unionid     varchar(64)                        null comment '微信开放平台统一标识(unionid)',
    wechat_session_key varchar(64)                        null comment '微信会话密钥(session_key)',
    nickname           varchar(50)                        null comment '用户昵称(优先使用微信昵称)',
    avatar             varchar(255)                       null comment '用户头像URL(优先使用微信头像)',
    register_source    tinyint  default 1                 null comment '用户注册来源: 1=普通注册, 2=微信小程序, 3=微信App, 4=其他第三方',
    created_at         datetime default CURRENT_TIMESTAMP not null comment '创建时间',
    updated_at         datetime default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment '更新时间',
    deleted            tinyint  default 0                 not null comment '逻辑删除标记: 0=正常, 1=删除',
    constraint idx_users_wechat_openid
        unique (wechat_openid),
    constraint uk_email
        unique (email),
    constraint uk_username
        unique (username)
)
    comment '用户表：管理用户信息和角色权限';

create index idx_created_at
    on users (created_at);

create index idx_deleted
    on users (deleted);

create index idx_role
    on users (role);

create index idx_username_search
    on users (deleted, username);

create index idx_users_register_source
    on users (register_source);

create index idx_users_wechat_unionid
    on users (wechat_unionid);

INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1001, 'aigc_trainer_lisa', 'lisa@example.com', 'lisa', 1, null, null, null, null, 'AIGC培训师Lisa', '', 1, '2025-09-29 21:18:19', '2025-09-30 00:02:56', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1002, 'working_mom_annie', 'annie@example.com', 'annie', 1, null, null, null, null, '职场妈妈Annie', '', 1, '2025-09-29 21:18:19', '2025-09-30 00:02:56', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1003, 'learning_sophia', 'sophia@example.com', 'sophia', 1, null, null, null, null, '学习达人Sophia', '', 1, '2025-09-29 21:18:19', '2025-09-30 00:02:56', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1004, 'balance_expert_grace', 'grace@example.com', 'grace', 2, null, null, null, null, '平衡专家Grace', '/api/uploads/avatar/2025/10/10/f190b7e6003c4a098f246915ba4ec0f7.png', 1, '2025-09-29 21:18:19', '2025-10-11 00:12:20', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1005, 'time_master_rachel', 'rachel@example.com', 'rachel', 1, null, null, null, null, '时间管理师Rachel', '', 1, '2025-09-29 21:18:19', '2025-09-30 00:02:56', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1006, 'testuser99', 'test99@example.com', 'Test123456', 0, '{"gender": "female", "industry": "IT"}', null, null, null, null, null, null, '2025-10-03 00:12:21', '2025-10-06 01:24:31', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1007, 't', 'fixtest@example.com', 'Test123', 0, '{"verificationMaterials": "身份认证材料：工作证明、学历证明"}', null, null, null, '测试昵称_1759482669044', null, null, '2025-10-03 00:16:35', '2025-10-03 17:11:10', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1008, 'testuser001', 'test001@example.com', 'pass123456', 2, '{"idCard": "123456789012345678", "company": "Test Company", "position": "Engineer", "realName": "Test User"}', null, null, null, null, null, null, '2025-10-03 00:49:27', '2025-10-03 01:28:58', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1009, 'autotest_1759481723718', 'autotest_1759481723718@test.com', 'Test123456', 1, '{"gender": "female", "occupation": "IT"}', null, null, null, null, null, null, '2025-10-03 16:55:24', '2025-10-06 01:24:37', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1010, 'autotest_1759481815144', 'autotest_1759481815144@test.com', 'Test123456', 0, '{"gender": "female", "occupation": "IT"}', null, null, null, null, null, null, '2025-10-03 16:56:56', '2025-10-03 16:56:56', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1011, 'testuser_1759482604736', 'test_1759482604736@example.com', 'Test123456', 0, null, null, null, null, null, null, null, '2025-10-03 17:10:05', '2025-10-03 17:10:05', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1012, 'testuser_1759482668154', 'test_1759482668154@example.com', 'Test123456', 0, null, null, null, null, null, null, null, '2025-10-03 17:11:09', '2025-10-03 17:11:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1013, 'testuser_1759484181019', 'test_1759484181019@example.com', 'Test123456', 0, null, null, null, null, null, null, null, '2025-10-03 17:36:21', '2025-10-03 17:36:21', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1014, 'test_1759484534309', 'test_1759484534309@test.com', 'Test123', 0, null, null, null, null, null, null, null, '2025-10-03 17:42:15', '2025-10-03 17:42:15', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1015, 'test_1759484892001', 'test_1759484892001@test.com', 'Test123', 0, null, null, null, null, '测试昵称_1759484906170', '', null, '2025-10-03 17:48:13', '2025-10-11 00:11:40', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1016, 'test_1759485016537', 'test_1759485016537@test.com', 'Test123', 0, null, null, null, null, '测试昵称_1759485030031', '', null, '2025-10-03 17:50:17', '2025-10-11 00:11:40', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1017, 'testuser1', 'test1@test.com', '$2a$10$jA1pjrhXgS/ypfwLs1q7BuFq.kd6698yEuObmjHG9ui.ZhrUYvM8a', 1, '{}', null, null, null, null, null, null, '2025-10-04 03:20:14', '2025-10-06 01:25:12', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1018, 'testuser2', 'test2@test.com', '$2a$10$hjpr1yquG6rP8x0q0BuAVupTKhFwKD2TvrjegP2T7d3u4bD6efVuC', 1, '{}', null, null, null, null, null, null, '2025-10-04 03:20:15', '2025-10-09 20:59:04', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1019, 'testuser3', 'test3@test.com', '$2a$10$ukTtPGqVgfPA5S8hsCP0t.RWEaqs9SWUOdMogaOVqTuC.g1FyPzNW', 0, '{}', null, null, null, null, null, null, '2025-10-04 03:20:19', '2025-10-04 03:20:19', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1020, 'testuser_p0_001', 'testuser_p0_001@example.com', '$2a$10$oDMy.AZOHwyHHNmqFQpPcOVLHIulNhOyTVEbco9BAfPIwZLriTRwe', 0, null, null, null, null, null, null, null, '2025-10-05 00:06:17', '2025-10-05 00:06:17', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1021, 'finaltest001', 'finaltest001@example.com', '$2a$10$Zv2/S9T/OfE7XkfCl98yJ.6S9ZjNRbTEKY95ON6yw2QN7klMGo/T6', 0, null, null, null, null, null, null, null, '2025-10-05 00:52:55', '2025-10-05 00:52:55', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1022, 'trial_user_1759597853389', 'trial_1759597853389@test.com', '$2a$10$9uPAFGIHoVHmcFSVvlJjhekCvdSTsn/ojbJ/CUUpzhIRQd3u2Vfcm', 0, null, null, null, null, null, null, null, '2025-10-05 01:10:54', '2025-10-05 01:10:54', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1023, 'trial_user_1759598011901', 'trial_1759598011901@test.com', '$2a$10$gzYkbNxwbV4RmDWk0F0UNuwhz0w5JiUU0X2fVyNnIL4CL0gvLQl2W', 0, null, null, null, null, null, null, null, '2025-10-05 01:13:32', '2025-10-05 01:13:32', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1024, 'trial_user_1759598053666', 'trial_1759598053666@test.com', '$2a$10$GYY12jileN1NdxpycyCD2.xgv9cgMAHYpTYuQvvCsmLQoWyxsK3Zq', 0, null, null, null, null, null, null, null, '2025-10-05 01:14:14', '2025-10-05 01:14:14', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1025, 'phase2_user_1759598760237', 'phase2_1759598760237@test.com', '$2a$10$if3fbl9bI86g1iQxxQKPBe0bHqiQaYiANho.hvYUuDrc8dxf2O2dC', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:00', '2025-10-05 01:26:00', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1026, 'verify_test_1759598761125', 'verify_1759598761125@test.com', '$2a$10$JRUUarlXykQ5ON2TmQ25KuO7Tfl9djmW7l0/9j1HT4/CpSo0zZ0Y2', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:02', '2025-10-05 01:26:02', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1027, 'journey_user_1759598764298', 'journey_1759598764298@test.com', '$2a$10$LDytwAMr01hRUA/kYx77O.KVBhsfNQ/8eTaVJNrR3bZSFUp/cwyc.', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:04', '2025-10-05 01:26:04', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1028, 'load_user_1759598768458_7', 'load_1759598768458_7@test.com', '$2a$10$ic1ktIJ/M26fV0IwMcsRf.BR.svxW/HldOuFtNBgU7h2CSvN9LZ4K', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1029, 'load_user_1759598768458_5', 'load_1759598768458_5@test.com', '$2a$10$AN/GG/YceCp8MfkXZPLEOOzOvHUVswKQ2VVF9tXYiAyGHkwh/6Qxu', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1030, 'load_user_1759598768458_4', 'load_1759598768458_4@test.com', '$2a$10$3Bjso7tW79cw/J9xjNSUdezvMSaVKQb1wgIrb9W8lH9sto71FFRja', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1031, 'load_user_1759598768458_0', 'load_1759598768458_0@test.com', '$2a$10$ip5fSkz7gwbf0oKVxx.t.uLa/3SGANiit2PoMJY5jioiMWBDkjQ3i', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1032, 'load_user_1759598768458_3', 'load_1759598768458_3@test.com', '$2a$10$GL5zLJRsr7TxN8YzsSVo.ON.jTGYGZDBqxewqkwubpbvYPam/2Asm', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1033, 'load_user_1759598768458_1', 'load_1759598768458_1@test.com', '$2a$10$nHQD9bDXXu66jsCbtYPw8OqadJfP0Hr2V.80srM9dcAH5FuoiZH8a', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1034, 'load_user_1759598768458_6', 'load_1759598768458_6@test.com', '$2a$10$rmc2w/nigfpvSZyz3X0CUeMntbxta8jFCtimGW.M5lDzljoza78Oi', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1035, 'load_user_1759598768458_2', 'load_1759598768458_2@test.com', '$2a$10$7UDL2JR2lP98UtPg2C2nwOXLVoVIyvO1ERtdTys1EJ01uOBM2yqre', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1036, 'load_user_1759598768458_9', 'load_1759598768458_9@test.com', '$2a$10$dW8YwIEu2DevsZY.Ey43T.hKdCNayq7J2Q2iyRTRYzE1MNQofLxFm', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:09', '2025-10-05 01:26:09', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1037, 'load_user_1759598768458_8', 'load_1759598768458_8@test.com', '$2a$10$G3CEKVrTVGFwJdTjlWFYiefH6CPq2C5Q.1lRbHIi7rAVbKK.OrI1q', 0, null, null, null, null, null, null, null, '2025-10-05 01:26:10', '2025-10-05 01:26:10', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1039, 'admin', '123@qq.com', '$2a$10$aihaOw4aOKGjKdqxJm51z.3RJ5mKPW0Lwn62uo.0D1ysSNhksrMFO', 2, null, null, null, null, 'admin1', '/api/uploads/avatar/2025/10/10/f190b7e6003c4a098f246915ba4ec0f7.png', null, '2025-10-05 22:39:08', '2025-10-10 21:39:36', 0);
INSERT INTO herizon.users (id, username, email, password_hash, role, questionnaire_data, wechat_openid, wechat_unionid, wechat_session_key, nickname, avatar, register_source, created_at, updated_at, deleted) VALUES (1094, 'kokoa', '1@qq.com', '$2a$10$uUhdBx9f4cipa5RygIvFJ.FzhLt5rSfSUsqQ7y89uZxJHxw066k22', 0, '{"city": "上海", "ageRange": "18-25", "industry": "tech", "purposes": ["career_growth"], "realName": "1", "interests": [], "workYears": "1-3", "companySize": "startup", "agreePrivacy": true, "positionLevel": "entry", "genderIdentity": "female", "selfIntroduction": "111"}', null, null, null, 'kokoa', null, null, '2025-10-11 21:59:08', '2025-10-11 22:11:31', 0);
